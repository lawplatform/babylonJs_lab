import { Vector3 } from '@babylonjs/core/Maths/math.vector'
import { Mesh } from '@babylonjs/core/Meshes/mesh'
import { MeshAssetTask } from '@babylonjs/core/Misc/assetsManager'
import React, { Suspense, useContext, useEffect, useMemo, useRef } from 'react'
import {
	AssetManagerContext,
	AssetManagerContextProvider,
	Engine,
	Scene,
	Task,
	TaskType,
	useAssetManager,
	useBeforeRender,
} from 'react-babylonjs'



const modelAssetTasks: Task[] = [
	{
		taskType: TaskType.Mesh,
		rootUrl: `'/glb/`,
		sceneFilename: 'logo.glb',
		name: 'logo',
	}
]


const LogoModel = () => {
	const assetManagerResult = useAssetManager(modelAssetTasks);
	useEffect(() => {
		console.log('Loaded Tasks', assetManagerResult)
		const boomboxTask = assetManagerResult.taskNameMap[
			'logo'
		] as MeshAssetTask
		boomboxTask.loadedMeshes[0].position = new Vector3(2.5, 0, 0)
		boomboxTask.loadedMeshes[1].scaling = new Vector3(20, 20, 20)


	})

	return null
}

const Logo = () => {
	return (
		<AssetManagerContextProvider>
			<Suspense fallback={<MyFallback />}>
				<LogoModel />
			</Suspense>
		</AssetManagerContextProvider>
	)
}

export default Logo;
